-- Functional (impure) helpers
DROP FUNCTION IF EXISTS generate_epoch_step_id CASCADE;

CREATE OR REPLACE FUNCTION generate_epoch_step_id (BIGINT,BIGINT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5(CAST($1 AS VARCHAR(128)) ||CAST ($2 AS VARCHAR(128)) ||NOW ()::VARCHAR(128))::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_board_id CASCADE;

CREATE OR REPLACE FUNCTION generate_board_id (BIGINT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5(CAST($1 AS VARCHAR(128)) ||NOW ()::VARCHAR(128))::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_line_id CASCADE;

CREATE OR REPLACE FUNCTION generate_line_id (TEXT,BIGINT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1||CAST ($2 AS VARCHAR(128)))::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_square_id CASCADE;

CREATE OR REPLACE FUNCTION generate_square_id (TEXT,BIGINT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1||CAST ($2 AS VARCHAR(128)))::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_role_id CASCADE;

CREATE OR REPLACE FUNCTION generate_role_id (BIGINT,TEXT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5(CAST($1 AS VARCHAR(128)) || $2||NOW ()::VARCHAR(128))::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_action_id CASCADE;

CREATE OR REPLACE FUNCTION generate_action_id (TEXT,TEXT,TEXT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1|| $2||$3)::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_odd_id CASCADE;

CREATE OR REPLACE FUNCTION generate_odd_id (TEXT,BIGINT,BIGINT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1||$2|| $3)::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_piece_id CASCADE;

CREATE OR REPLACE FUNCTION generate_piece_id (TEXT,TEXT,TEXT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1|| $2||$3)::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_position_id CASCADE;

CREATE OR REPLACE FUNCTION generate_position_id (TEXT,TEXT,TEXT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1|| $2||$3)::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_interaction_id CASCADE;

CREATE OR REPLACE FUNCTION generate_interaction_id (TEXT,TEXT,TEXT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1|| $2||$3)::VARCHAR(128) $$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS generate_interaction_odd_id CASCADE;

CREATE OR REPLACE FUNCTION generate_interaction_odd_id (TEXT,TEXT) RETURNS VARCHAR(128)
AS
$$
SELECT MD5($1||$2)::VARCHAR(128) $$ LANGUAGE SQL;